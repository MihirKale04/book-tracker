<% 
const title = "Add Book";
const bookValue = book || {};
const errorsObj = errors || {};
const generalError = errorsObj.general ? `<p class="error">${escapeHtml(errorsObj.general)}</p>` : "";
const titleError = errorsObj.title ? `<span class="error">${escapeHtml(errorsObj.title)}</span>` : "";
const authorError = errorsObj.author ? `<span class="error">${escapeHtml(errorsObj.author)}</span>` : "";
const ratingError = errorsObj.rating ? `<span class="error">${escapeHtml(errorsObj.rating)}</span>` : "";
const selectedStatus = bookValue.status || "to-read";
%>
<%- include("../layout", { title, body: `
  <h2>Add New Book</h2>
  
  ${generalError}
  
  <form method="post" action="/books">
    <div>
      <label for="title">Title *</label>
      <input 
        type="text" 
        id="title" 
        name="title" 
        value="${escapeHtml(bookValue.title || "")}" 
        placeholder="Enter book title"
        required
        ${errorsObj.title ? `aria-invalid="true"` : ""}
      />
      ${titleError}
    </div>
    
    <div>
      <label for="author">Author *</label>
      <input 
        type="text" 
        id="author" 
        name="author" 
        value="${escapeHtml(bookValue.author || "")}" 
        placeholder="Enter author name"
        required
        ${errorsObj.author ? `aria-invalid="true"` : ""}
      />
      ${authorError}
    </div>
    
    <div>
      <label for="status">Status</label>
      <select id="status" name="status">
        <option value="to-read" ${selectedStatus === "to-read" ? "selected" : ""}>ðŸ“š To Read</option>
        <option value="reading" ${selectedStatus === "reading" ? "selected" : ""}>ðŸ“– Reading</option>
        <option value="read" ${selectedStatus === "read" ? "selected" : ""}>âœ… Read</option>
      </select>
    </div>
    
    <div>
      <label for="rating">Rating (1-5)</label>
      <input 
        type="number" 
        id="rating" 
        name="rating" 
        min="1" 
        max="5" 
        value="${bookValue.rating || ""}"
        placeholder="Optional: 1-5"
        ${errorsObj.rating ? `aria-invalid="true"` : ""}
      />
      ${ratingError}
    </div>
    
    <div class="row">
      <button type="submit">âž• Add Book</button>
      <a href="/books" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
` }) %>

